{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nlet savedCart = [];\n\ntry {\n  savedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n} catch (error) {\n  savedCart = [];\n}\n\nconst initialState = {\n  cart: savedCart\n}; // adding cart State \n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addProduct: (state, action) => {\n      // check if the product exists\n      const {\n        cart\n      } = state;\n      const productExists = cart.find(product => {\n        return product.id === action.payload.id;\n      });\n\n      if (productExists) {\n        const updatedCart = cart.map(product => {\n          if (product.id === action.payload.id) {\n            return { ...product,\n              quantity: product.quantity + 1\n            };\n          }\n\n          return product;\n        });\n        state.cart = updatedCart;\n      } else {\n        const updatedCart = [...cart, { ...action.payload,\n          quantity: 1\n        }];\n        state.cart = updatedCart;\n      }\n\n      return state;\n    },\n    removeProduct: (state, action) => {\n      const {\n        cart\n      } = state;\n      const updatedCart = cart.filter(product => {\n        return product.id !== action.payload;\n      });\n      state.cart = updatedCart;\n      return state;\n    }\n  }\n});\nconst {\n  addProduct,\n  removeProduct\n} = cartSlice.actions;\n\nconst cartCountSelector = state => {\n  // this function returns total number of items in the cart\n  // This means 4 milk, 2 cheese will give 6 as output\n  const {\n    cart\n  } = state;\n  const totalItems = cart.reduce((prev, curr) => {\n    const totalTillNow = prev + curr.quantity;\n    return totalTillNow;\n  }, 0);\n  return totalItems;\n};\n\nconst cartValueSelector = state => {\n  // this function will return the total bill amount of our cart\n  const {\n    cart\n  } = state;\n  const totalAmount = cart.reduce((prev, curr) => {\n    const totalAmountTillNow = prev + curr.quantity * curr.price;\n    return totalAmountTillNow;\n  }, 0);\n  return totalAmount;\n};\n\nexport { addProduct, removeProduct, cartCountSelector, cartValueSelector, cartSlice };","map":{"version":3,"sources":["D:/Web Development/superm-solution-react-18/src/Features/cartSlice.js"],"names":["createSlice","savedCart","JSON","parse","localStorage","getItem","error","initialState","cart","cartSlice","name","reducers","addProduct","state","action","productExists","find","product","id","payload","updatedCart","map","quantity","removeProduct","filter","actions","cartCountSelector","totalItems","reduce","prev","curr","totalTillNow","cartValueSelector","totalAmount","totalAmountTillNow","price"],"mappings":"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","sourcesContent":["import {createSlice} from '@reduxjs/toolkit';\r\n\r\n\r\nlet savedCart = [];\r\ntry{\r\n    savedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n}catch(error){\r\n    savedCart = [];\r\n}\r\n\r\nconst initialState = {\r\n    cart : savedCart\r\n}\r\n\r\n// adding cart State \r\nconst cartSlice = createSlice({\r\n    name : 'cart',\r\n    initialState,\r\n    reducers : {\r\n        addProduct : (state,action) => {\r\n            // check if the product exists\r\n\r\n            const {cart} = state;\r\n\r\n            const productExists = cart.find(product =>{\r\n                return product.id === action.payload.id\r\n            });\r\n\r\n            if(productExists){\r\n                const updatedCart = cart.map(product =>{\r\n                    if(product.id === action.payload.id){\r\n                        return {\r\n                            ...product,\r\n                            quantity:product.quantity +1\r\n                        }\r\n                    }\r\n\r\n                    return product;\r\n                })\r\n\r\n                state.cart = updatedCart\r\n            }else{\r\n                const updatedCart = [...cart, {\r\n                    ...action.payload,\r\n                    quantity :1\r\n                }];\r\n\r\n                state.cart = updatedCart\r\n            }\r\n\r\n            return state;\r\n\r\n        },\r\n        removeProduct : (state, action ) => {\r\n            const {cart} = state;\r\n            const updatedCart = cart.filter(product => {\r\n                return product.id !== action.payload\r\n            });\r\n\r\n            state.cart = updatedCart;\r\n\r\n            return state;\r\n        }\r\n    }\r\n})\r\n\r\nconst {addProduct, removeProduct} = cartSlice.actions;\r\n\r\nconst cartCountSelector = (state) => {\r\n    // this function returns total number of items in the cart\r\n    // This means 4 milk, 2 cheese will give 6 as output\r\n\r\n    const {cart} = state;\r\n\r\n    const totalItems = cart.reduce((prev, curr) => {\r\n        const totalTillNow = prev + curr.quantity;\r\n        return totalTillNow;\r\n    }, 0);\r\n\r\n    return totalItems;\r\n}\r\n\r\n\r\nconst cartValueSelector = (state) => {\r\n    // this function will return the total bill amount of our cart\r\n    const {cart} = state;\r\n\r\n    const totalAmount = cart.reduce((prev, curr) => {\r\n        const totalAmountTillNow = prev + (curr.quantity * curr.price);\r\n        return totalAmountTillNow;\r\n    }, 0);\r\n\r\n    return totalAmount\r\n\r\n}\r\n\r\n\r\nexport {addProduct,\r\n     removeProduct,\r\n     cartCountSelector,\r\n     cartValueSelector,\r\n      cartSlice}"]},"metadata":{},"sourceType":"module"}